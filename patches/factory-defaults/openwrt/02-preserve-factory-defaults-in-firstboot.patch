Index: package/base-files/files/sbin/firstboot
===================================================================
--- package/base-files/files/sbin/firstboot	(revision 43057)
+++ package/base-files/files/sbin/firstboot	(working copy)
@@ -1,3 +1,14 @@
 #!/bin/sh
 
+# Save factory defaults
+mkdir /tmp/factory-defaults-persist && \
+		cp /etc/factory-defaults/persist/* /tmp/factory-defaults-persist/ 2> /dev/null && \
+		FACTORY_DEFAULTS_SAVED=1 || FACTORY_DEFAULTS_SAVED=0
+
 echo y | /sbin/jffs2reset
+
+# Restore factory defaults
+if [ "$FACTORY_DEFAULTS_SAVED" -eq 1 ]; then
+	mkdir -p /etc/factory-defaults/persist && \
+			cp /tmp/factory-defaults-persist/* /etc/factory-defaults/persist 2> /dev/null
+fi
